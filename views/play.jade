doctype html
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    script(type='text/javascript', src='/javascripts/jquery-1.10.1.min.js')
    script(type='text/javascript', src='/socket.io/socket.io.js')
    script(type='text/javascript', src='/javascripts/player.js')
    script(type='text/javascript').
      var socket = io.connect();
    
      $(document).on('click', 'button.vote', function(){
        var trackId = $(this).attr('data-trackid');
        var val = $(this).attr('data-val');
        var roomId = $('var#roomId').attr('data-val');
        socket.emit('vote', { roomId: roomId, trackId: trackId, val: val });
      });

      $(document).on('click', 'button#skip', function(){
        var roomId = $('var#roomId').attr('data-val');
        socket.emit('skip', roomId);
      });

      $(document).on('click', 'button#addTrack', function(){
        var trackEid = $('input#trackExtId').val();
        var roomId = $('var#roomId').attr('data-val');
        socket.emit('newTrack', { roomId: roomId, trackEid: trackEid });
        $('input#trackExtId').val('');
      });
      
  body
    var#roomId(data-val='#{roomId}')
    h1 Welcome to room
    var#roomName
    p Currently playing
    var#currentTrackName
    div
      object#ytplayer(type='application/x-shockwave-flash', width='640', height='360', data='http://www.youtube.com/v/RHevGGYuAsw?autoplay=1&enablejsapi=1&playerapiid=ytplayer&version=3')
        param(name='allowScriptAccess', value='always')
        param(name='allowFullScreen', value='false')
    button#skip Skip
    h3 Tracks
    div#tracks
    input#trackExtId(type='text', placeholder='Youtube ID')
    button#addTrack New Track
    br
    br
    var#error